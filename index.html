<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Randevu Al</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      margin: 0;
      padding: 20px;
    }

    .container {
      max-width: 420px;
      margin: auto;
      background: #ffffff;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
    }

    h2 {
      text-align: center;
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }

    input, select, button {
      width: 100%;
      padding: 12px;
      margin-top: 6px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 16px;
    }

    button {
      margin-top: 20px;
      background-color: #0a4ea3;
      color: white;
      border: none;
      cursor: pointer;
    }

    button:hover {
      background-color: #083d80;
    }

    .success {
      margin-top: 15px;
      color: green;
      text-align: center;
      font-weight: bold;
    }

    .error {
      margin-top: 15px;
      color: red;
      text-align: center;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <div class="container">
    <h2>Randevu Al</h2>

    <form id="randevuForm">
      <label>Veli Ad Soyad</label>
      <input type="text" name="veli" required>

      <label>Telefon</label>
      <input type="tel" name="telefon" required>

      <label>Ã–ÄŸrenci SÄ±nÄ±fÄ±</label>
      <select name="sinif" required>
        <option value="">SeÃ§iniz</option>
        <option>Anaokulu</option>
        <option>1. SÄ±nÄ±f</option>
        <option>2. SÄ±nÄ±f</option>
        <option>3. SÄ±nÄ±f</option>
        <option>4. SÄ±nÄ±f</option>
        <option>5. SÄ±nÄ±f</option>
          <option>6. SÄ±nÄ±f</option>
          <option>7. SÄ±nÄ±f</option>
          <option>8. SÄ±nÄ±f</option>
      </select>

      <label>Tarih</label>
      <input type="date" name="tarih" required>

      <label>Saat</label>
      <select name="saat" id="saatler" required>
        <option value="">Ã–nce tarih seÃ§in</option>
      </select>

      <button type="submit">Randevu OluÅŸtur</button>
    </form>

    <div id="mesaj"></div>
  </div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbxAKouVMhYDqFB78hkEwRCUuiKtShcafa4lVBI0oAXeB6E4M7cPPaWZ2pGkA9uJG4po/exec";

const form = document.getElementById("randevuForm");
const mesaj = document.getElementById("mesaj");
const saatlerSelect = document.getElementById("saatler");

// ğŸ“Œ Tarih seÃ§ilince saatleri getir
form.tarih.addEventListener("change", () => {
  saatlerSelect.innerHTML = "<option>YÃ¼kleniyor...</option>";

  fetch(`${API_URL}?action=saatler&tarih=${form.tarih.value}`)
    .then(res => res.json())
    .then(data => {
      saatlerSelect.innerHTML = "<option value=''>Saat seÃ§in</option>";
      data.forEach(saat => {
        const opt = document.createElement("option");
        opt.value = saat;
        opt.textContent = saat;
        saatlerSelect.appendChild(opt);
      });
    })
    .catch(() => {
      saatlerSelect.innerHTML = "<option>Hata oluÅŸtu</option>";
    });
});

// ğŸ“Œ Form gÃ¶nderimi
form.addEventListener("submit", e => {
  e.preventDefault();
  mesaj.innerHTML = "GÃ¶nderiliyor...";

  const formData = new FormData(form);

  fetch(API_URL, {
    method: "POST",
    body: formData
  })
  .then(res => res.json())
  .then(data => {
    if (data.status === "ok") {
      mesaj.className = "success";
      mesaj.innerHTML = "âœ… Randevunuz oluÅŸturuldu";
      form.reset();
    } else {
      mesaj.className = "error";
      mesaj.innerHTML = "âŒ Bu saat dolu";
    }
  })
  .catch(() => {
    mesaj.className = "error";
    mesaj.innerHTML = "âŒ Sistem hatasÄ±";
  });
});
</script>

</body>
</html>
